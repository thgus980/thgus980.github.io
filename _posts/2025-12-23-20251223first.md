---
layout: single
title:  "[2025-12-23] 20251223 개발일지"
categories: devlog
toc: true
---

## 챗봇 아키텍처

### React + Spring + FastAPI 구조
- Spring을 중간에 두는 것이 비효율적인 면이 있음 -> 유지보수 비용 증가, 네트워크 지연, 디버깅 복잡도
- 다른 아키텍처 1) API Gateway 도입: Nginx, Kong, AWS API Gateway와 같은 보안, 로깅, 트래픽 제어를 담당하는 경량화된 전문 솔루션을 두는 방식
- 다른 아키텍처 2) FastAPI 자체 보안 기능 강화: FastAPI Users/OAuth2(JWT 토큰 기반 인증을 직접 구현), Middleware(CORSMiddleware, TrusteHostMiddleware 등을 사용하여 IP 제한 및 헤더 검사)
- 다른 아키텍처 3) Spring을 메인 백엔드로, FastAPI를 'AI 마이크로서비스'로 활용
- Spring을 중간에 두는 이유가 단순한 보안용이 아니라 비즈니스 로직 및 통합용으로서는 괜찮은 선택. 메인 백엔드가 Spring이고 FastAPI는 AI 전용 마이크로 서비스 역할을 맡게 됨 -> Spring을 메인으로 두고 FastAPI를 뒤에 숨기는 구조
- 결론적으로는 아래와 같이 고민할 수 있음
    - FastAPI 단독 추천: 프로젝트 개발 기간이 짧다, 구조를 단순하게 가져가고 싶다
    - Spring+FastAPI 조합 추천: 사내에 Java 표준이 강하다, 이미 Spring 기반 구조가 있다

### FastAPI의 보안 강점
- 자동 입력 검증: Pydantic으로 SQL Injection, XSS 등 방어
- OAuth2/JWT 기본 지원: 인증/인가 표준 구현 내장
- HTTPS/TLS 지원: 암호화 통신
- CORS 제어: Cross-Origin 공격 방지
- 보안 헤더: OWASP 권장 사항 적용 가능
- 추가 보안 권장사항
    - VPC 내부 배치: FastAPI를 Private Subnet에 배치하고 ALB로만 접근
    - WAF 적용: AWS WAF나 CloudFlare로 웹 공격 차단
    - 정기 보안 스캔: Bandit, Safety로 취약점 검사
    - 의존성 관리: 정기적으로 pip-audit 실행
    - 감사 로깅: 모든 DB 접근, 로그인 시도 기록
