---
layout: single
title:  "[2026-02-28] 20260228 개발일지"
categories: devlog
toc: true
---

## AWS Certified Solutions Architect – Associate (SAA)

### 보안그룹-상태 저장(Stateful)과 참조(Referencing)
- Q. 한 기업이 AWS에서 3계층 웹 애플리케이션을 운영하고 있습니다. 보안 팀은 데이터베이스(RDS) 인스턴스가 오직 웹 계층의 EC2 인스턴스로부터 들어오는 포트 3306(MySQL) 트래픽만 허용하도록 제한하고자 합니다. 웹 서버의 개수는 Auto Scaling에 의해 수시로 변할 수 있습니다. 가장 효율적이고 안전한 보안 그룹 설정 방법은 무엇입니까?
  1. 데이터베이스를 퍼블릭 서브넷으로 옮기고 인터넷 게이트웨이를 통해 웹 서버와 통신하게 한다.
  2. 데이터베이스 보안 그룹의 인바운드 규칙에서 소스(Source)를 웹 서버 보안 그룹의 ID로 지정한다.
  3. 웹 서버 인스턴스가 생성될 때마다 해당 공인 IP를 데이터베이스 보안 그룹 규칙에 수동으로 추가한다.
  4. 웹 서버가 위치한 퍼블릭 서브넷의 CIDR 블록 전체를 데이터베이스 보안 그룹의 소스로 추가한다.
- A. 정답 2번
  - 보안 그룹 ID를 소스로 참조하면 인스턴스의 IP가 바뀌거나 개수가 변해도 동일한 보안 그룹을 가진 모든 서버의 접근을 자동으로 허용하므로 가장 유연하고 안전함.
  - IP 주소는 변할 수 있지만, 리소스에 부여된 '그룹' 이름은 변하지 않음
 
### (참고 1) 보안 그룹 ID 참조란?
- 서버를 운영할 때, 트래픽이 많아지면 Auto Scaling이 서버를 늘릴 수 있음. 이때 새로 생겨난 서버들은 각각 다른 IP를 갖게 됨. 만약 IP 방식으로 권한을 관리했다면 매번 DB 설정을 바꿔야하겠지만, **웹서버-SG** 라는 그룹 자체를 허용해두면 새로 생긴 서버들도 해당 그룹에 속해 있기 때문에 즉시 DB에 접속이 가능.

### (참고 2) 인바운드 vs 아웃바운드 (상태 저장)
- 보안 그룹은 '상태 저장(Stateful)'임. DB로 들어오는(Inbound) 길만 열어주면, 그 요청에 대한 응답이 나가는(Outbound) 길은 AWS가 자동으로 열어줌.
- 반면 **네트워크 ACL(NACL)** 은 들어오는 길과 나가는 길을 각각 따로 수동으로 열어줘야 함. -> Stateless

### (참고 3) 네트워크 ACL? (Network Access Control List)
- VPC 내의 서브넷 단위로 트래픽을 제어하는 방화벽 역할을 함.
- 보안 그룹(Security)와 NACL의 차이점
  - 보안 그룹: 적용 범위는 인스턴스(EC2) 단위/ Stateful/ 허용 규칙만 가능/ 모든 규칙을 검토 후 허용
  - NACL: 적용 범위는 서브넷 단위/ Stateless(나가는 길도 직접 열어야 함)/ 허용과 거부 모두 가능/ 번호 순서대로 검토(낮은 번호 우선)
- NACL을 사용하는 이유는 **특정 IP 차단**과 보안 그룹과 같이 사용할 때 **이중 방어** 를 할 수 있기 때문
- Stateless: 인바운드와 아웃바운드 설정을 따로 해줘야 함. 이때 아웃바운드로 사용하는 포트 대역을 **임시 포트** 라고 부르는데, 이를 수동으로 열어줘야 하는 번거로움이 있음.
- 보안 그룹은 특정 IP를 '거부'하는 기능이 없음. 특정 대상을 명시적으로 막으려면 반드시 NACL의 Deny 규칙을 사용해야 함
