---
layout: single
title:  "[2026-01-16] 20260116 개발일지"
categories: devlog
toc: true
---

## DevOps

### 형상 관리
- 소프트웨어의 소스 코드뿐만 아니라 문서, 스크립트 등 개발 과정에서 발생하는 모든 변경 사항을 체계적으로 관리하는 활동. 가장 좁은 의미이자 핵심은 **버전 관리**
- 핵심 기능: 이력 추적, 협업
- 대표 도구: Git, SVN

### CI(Continuous Intergration, 지속적 통합)
- 개발자들이 작성한 코드를 자주(지속적으로) 중앙 저장소에 통합하고, 자동으로 빌드 및 테스트하는 과정
- 초기에 버그 발견 가능
- 핵심 활동: 커밋->자동 빌드->자동 테스트->결과 리포트

### CD(Continuous Delivery, Deployment, 지속적 제공/배포)
- CI 과정을 통과한 코드를 실제 사용자가 사용할 수 있는 환경(운영 서버)까지 자동으로 릴리스하는 과정

### 가장 대중적인 협업 툴
- 깃허브, 깃랩, 빗버킷
- 특히 깃허브는 VS Code와의 연동, AWS 배포 자동화(GitHub Actions)가 쉽다
- 협엽 시 주의: main 브랜치(운영 서버용 코드)를 직접 수정하지 말고, 기능별로 브랜치를 파서 작업한 뒤 합치기
- 응용: 코드가 GitHub에 합쳐질 때마다 AWS EC2로 자동 배포되도록 GitHub Actions 스크립트를 작성

### Git Actions
- 개발자가 코드를 레파지토리에 올리면, 그 시점을 감지해서 미리 정해둔 작업(테스트, 빌드, 배포 등)을 GitHub 서버가 대신 수행해 주는 기능. 별도의 CI/CD 서버(예: Jenkins)를 따로 구축할 필요가 없다는 것이 큰 장점.
- 핵심 개념 5가지 (GitHub Actions는 .github/workflows 폴더 안에 있는 YAML(야물) 설정 파일을 따라 움직임)
  - Workflow: 자동화할 전체 작업의 흐름 (예: 배포 프로세스)
  - Event: 워크플로우를 실행시키는 트리거 (예: main 브랜치에 코드가 push 되었을 때)
  - Job: 하나의 처리 단위 (예: 빌드 작업, 배포 작업). 여러 Job을 병렬로 돌릴 수도 있음
  - Step: Job 안에서 순차적으로 실행되는 개빌 명령어 (예: 코드 다운로드, 패키지 설치, 명령어 실행)
  - Runner: 이 모든 작업을 실제로 수행하는 가상의 컴퓨터(서버). GitHub에서 무료로 제공하는 리눅스, 윈도우, 맥OS 서버를 빌려 씀
- 프로젝트 적용 예시 (AWS EC2 배포)
  - [User] VS Code에서 코드를 수정하고 GitHub main 브랜치로 push
  - [GitHub Actions] 새로운 코드를 감지하고 Workflow를 시작
  - [Runner] GitHub의 가상 컴퓨터가 켜짐
  - [Step1] 가상 컴퓨터가 최신 코드를 내려받음
  - [Step2] (프론트엔드) React 프로젝트를 빌드(npm run build)하여 결과물을 만듦
  - [Step3] (배포) AWS EC2 서버에 SSH로 접속하여 파일을 전송하고, FastAPI 서버를 재시작
- 설정 파일 예시 (deploy.yml): 스크립트 파일은 껍데기는 YAML, 내용물은 Bash 언어로 이루어짐
  ```YAML
  name: 사내 챗봇 배포 (Deploy to AWS EC2)
  
  # 언제 실행할지 (트리거)
  on:
    push:
      branches: [ "main" ]
  
  jobs:
    deploy:
      runs-on: ubuntu-latest # GitHub의 우분투 서버를 빌려 씀
  
      steps:
      # 1. 코드 내려받기
      - name: Checkout code
        uses: actions/checkout@v3
  
      # 2. AWS EC2에 접속해서 배포 명령어 실행 (SSH)
      - name: Deploy to EC2
        uses: appleboy/ssh-action@master # 미리 만들어진 'Action'을 가져다 씀
        with:
          host: ${{ secrets.EC2_HOST }}      # 보안 정보는 GitHub 설정에 숨겨둠
          username: ${{ secrets.EC2_USER }}
          key: ${{ secrets.EC2_KEY }}
          script: |
            cd /home/ec2-user/my-chatbot-project
            git pull origin main
            # React 빌드 및 FastAPI 재시작 명령어
            npm run build
            sudo systemctl restart fastapi
  ```
  
