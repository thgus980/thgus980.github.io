---
layout: single
title:  "[2025-10-06] 20251006 개발일지"
categories: devlog
toc: true
---

## 사내 MCP 서버 구축하기

### 1. 데이터 흐름 요약 (Claude Desktop과 사내 포탈 연동)
Claude Desktop (사용자 질의)  
↓ HTTPS (포트 8443)  
FastMCP Server (https://localhost:8443/mcp)  
↓ 툴 라우팅  
get_dictionary_categories (카테고리 개요 제공 툴) / search_dictionary_terms (용어 조회 툴)  
↓ async 호출  
oracle_db_manager  
↓ SQL 쿼리  
Oracle DB (XXX.XX.XX.XX:1521)  
↓ 결과 집합  
응답 포맷팅  
↓ HTTPS  
Claude Desktop (수신한 데이터를 자연어로 사용자에게 표시)   

### 2. MCP 서버는 별도 NLP 구현이 불필요하다
- LLM 역할은 서버 코드가 아니라 Claude Desktop (MCP 클라이언트)가 수행
- 동작 방식: 사용자 질문(자연어)-> Claude Desktop(여기서 LLM이 질문을 처리)-> MCP 프로토콜(툴 호출)-> 내가 구현한 MCP 서버(DB 쿼리 실행)-> Oracle DB
- 핵심 포인트
  1. Claude Desktop이 LLM- Claude Desktop에 MCP 서버를 커스텀 커넥터로 추가하면, 자연어 처리는 Claude가 담당
  2. 서버는 “툴”을 제공- MCP 서버는 툴을 노출하고, Claude가 필요할 때 이를 호출할 수 있게 함
  3. 호출 시점은 Claude가 판단- 사용자가 “객단가가 뭐야?”라고 물으면 Claude는 자연어 의도를 파악하고, 용어 정보가 필요하다고 결정한 뒤, 적절한 파라미터로 search_terminology 툴을 호출하고, 결과를 받아 자연어 응답으로 구성해 제공
  4. MCP 서버는 별도 NLP 구현이 불필요- MCP의 장점은 서버에서 OpenAI·Anthropic 같은 LLM API 호출을 구현할 필요가 없다는 점. 클라이언트(Claude Desktop)가 이미 그 역할을 수행
- 서버에서 할 일? 사용 가능한 툴 정의하기(@mcp.tool()), 실제 비즈니스 로직 실행(DB 쿼리 등), 구조화된 데이터를 반환 -> **자연어 이해/생성은 모두 Claude Desktop의 역할**
