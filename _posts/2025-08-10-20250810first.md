---
layout: single
title:  "[2025-08-10] 20250810 개발일지"
categories: devlog
toc: true
---

## 강좌명: 자바와 스프링 부트로 생애 최초 서버 만들기, 누구나 쉽게 개발부터 배포까지! [서버 개발 올인원 패키지]

### Github Repository
https://github.com/thgus980/library-app

### 1. Controller와 스프링 컨테이너
1. 스프링 서버가 시작
2. 스프링 컨테이너(클래스 저장소)가 시작된다
3. 기본적으로 많은 스프링 빈(컨테이너 안에 있는 클래스)들이 등록된다 (ex) JdbcTemplate 처럼 미리 기본적으로 작성된 것
4. 우리가 설정해준 스프링 빈이 등록된다 (ex) 직접 구현한 UserController
5. 필요한 의존성이 자동으로 설정된다 (ex) UserController는 JdbcTemplate가 없으면 안되기 때문에 스프링 컨테이너가 둘 사이를 이어 줌

### 2. 구현한 서버 작동 순서
1. 스프링 서버가 시작
2. 스프링 컨테이너(클래스 저장소)가 시작된다
3. 기본적으로 많은 스프링 빈(컨테이너 안에 있는 클래스)들이 등록된다 (ex) JdbcTemplate 처럼 미리 기본적으로 작성된 것
4. JdbcTemplate를 의존하는 UserRepository가 스프링 빈으로 등록된다
5. UserRepository를 의존하는 UserService가 스프링 빈으로 등록된다
6. UserService를 의존하는 UserController가 스프링 빈으로 등록된다

### 3. 스프링 컨테이너를 왜 사용할까?
- 데이터를 메모리에 저장할지, MySQL에 저장할지 -> Repository의 역할에 관련된 것만 바꾸고 싶은데 BookService까지 바꿔야 한다.
- 어떻게 하면 Repository를 다른 Class로 바꾸더라도 BookService를 변경하지 않을 수 있을까? -> interface를 활용해보자 -> 구현체를 new 하는 부분만 갈아끼워주면 됨 (바꾸는 범위 축소)
- 위의 방법도 아쉽다. 그래서 등장한 것이 스프링 컨테이너. -> BookMemoryRepository, BookMysqlRepository, BookService 모두 스프링 빈으로 등록해서 스프링 컨테이너가 서로 알아서 연결시켜주도록 맡기자 (제어의 역전, IoC: 스프링 컨테이너가 어떤 구현 타입을 쓸지 대신 결정해줌)
- 컨테이너가 선택해 BookService에 넣어주는 과정을 의존성 주입(DI)라고 한다
- 스프링 빈이 같은 타입으로 2가지가 있다면 (BookRepository-> BookMemoryRepository, BoolMySqlRepository) 우리가 @Primary를 활용해서 조절 할 수 있다
- @Primary: 우선권을 결정하는 Annotation

### 4. 스프링 컨테이너를 다루는 방법 - 스프링 빈을 등록하는 방법
- 빈을 등록하는 방법? @Configuration, @Bean, @RestController, @Service, @Repository
- @Configuration: 클래스에 붙는 Annotation, @Bean을 사용할 때 함꼐 사용해 주어야 한다
- @Bean: 메소드에 붙는 Annotation, 메소드에서 반환되는 객체를 스프링 빈에 등록한다
- 언제 @Service, @Repository를 사용할까? 개발자가 직접 구현한 클래스, 메소드에!
- 언제 @Configuration+@Bean을 사용할까? 외부라이브러리, 프레임워크에서 만든 클래스를 등록할 때! (ex) JdbcTemplate
- @Component:주어진 클래스를 '컴포넌트'로 간주, 이 클래스들은 스프링 서버가 뜰 때 자동으로 감지된다, 스프링 빈으로 등록됨 (@Repository, @Service, @RestController에 사실 @Component가 숨어있다)
- 언제 @Component를 사용할까? (1) 컨트롤러, 서비스, 리포지토리가 모두 아니고 (2) 개발자가 직접 작성한 클래스를 스프링 빈으로 등록할 때 사용되기도 한다

### 4. 스프링 컨테이너를 다루는 방법 - 스프링 빈을 주입받는 방법
- (가장 권장) 생성자를 이용해 주입받는 방식 (@Autowired 생략 가능)
    ```java
    private final BookService bookService;

        public BookController(BookService bookService){ // 생성자를 통해서 스프링 컨테이너가 대신 BookService를 넣어줌
            this.bookService=bookService;
        }
    ```
- setter 사용
- 필드에 바로 @Autowired 사용

### 5. @Qualifier
- 같은 스프링 빈이 여러 개일 때, 그 중 특정 하나를 가져오고 싶은 경우에 사용